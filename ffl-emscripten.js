"use strict";var Module=typeof Module!="undefined"?Module:{};var ENVIRONMENT_IS_WEB=true;var ENVIRONMENT_IS_WORKER=false;var moduleOverrides=Object.assign({},Module);var scriptDirectory="";function locateFile(path){return scriptDirectory+path}var readAsync,readBinary;if(ENVIRONMENT_IS_WEB||ENVIRONMENT_IS_WORKER){if(ENVIRONMENT_IS_WORKER){scriptDirectory=self.location.href}else if(typeof document!="undefined"&&document.currentScript){scriptDirectory=document.currentScript.src}if(scriptDirectory.startsWith("blob:")){scriptDirectory=""}else{scriptDirectory=scriptDirectory.substr(0,scriptDirectory.replace(/[?#].*/,"").lastIndexOf("/")+1)}{readAsync=url=>fetch(url,{credentials:"same-origin"}).then(response=>{if(response.ok){return response.arrayBuffer()}return Promise.reject(new Error(response.status+" : "+response.url))})}}else{}var out=console.log.bind(console);var err=console.error.bind(console);Object.assign(Module,moduleOverrides);moduleOverrides=null;var wasmBinary;var wasmMemory;var ABORT=false;var EXITSTATUS;var HEAP8,HEAPU8,HEAP16,HEAPU16,HEAP32,HEAPU32,HEAPF32,HEAPF64;function updateMemoryViews(){var b=wasmMemory.buffer;Module["HEAP8"]=HEAP8=new Int8Array(b);HEAP16=new Int16Array(b);Module["HEAPU8"]=HEAPU8=new Uint8Array(b);Module["HEAPU16"]=HEAPU16=new Uint16Array(b);Module["HEAP32"]=HEAP32=new Int32Array(b);Module["HEAPU32"]=HEAPU32=new Uint32Array(b);Module["HEAPF32"]=HEAPF32=new Float32Array(b);HEAPF64=new Float64Array(b)}var __ATPRERUN__=[];var __ATINIT__=[];var __ATPOSTRUN__=[];var runtimeInitialized=false;function preRun(){callRuntimeCallbacks(__ATPRERUN__)}function initRuntime(){runtimeInitialized=true;callRuntimeCallbacks(__ATINIT__)}function postRun(){callRuntimeCallbacks(__ATPOSTRUN__)}function addOnInit(cb){__ATINIT__.unshift(cb)}var runDependencies=0;var runDependencyWatcher=null;var dependenciesFulfilled=null;function addRunDependency(id){runDependencies++}function removeRunDependency(id){runDependencies--;if(runDependencies==0){if(runDependencyWatcher!==null){clearInterval(runDependencyWatcher);runDependencyWatcher=null}if(dependenciesFulfilled){var callback=dependenciesFulfilled;dependenciesFulfilled=null;callback()}}}function abort(what){what="Aborted("+what+")";err(what);ABORT=true;EXITSTATUS=1;what+=". Build with -sASSERTIONS for more info.";var e=new WebAssembly.RuntimeError(what);throw e}var dataURIPrefix="data:application/octet-stream;base64,";var isDataURI=filename=>filename.startsWith(dataURIPrefix);function findWasmBinary(){var f="ffl-emscripten.wasm";if(!isDataURI(f)){return locateFile(f)}return f}var wasmBinaryFile;function getBinarySync(file){if(file==wasmBinaryFile&&wasmBinary){return new Uint8Array(wasmBinary)}if(readBinary){return readBinary(file)}throw"both async and sync fetching of the wasm failed"}function getBinaryPromise(binaryFile){if(!wasmBinary){return readAsync(binaryFile).then(response=>new Uint8Array(response),()=>getBinarySync(binaryFile))}return Promise.resolve().then(()=>getBinarySync(binaryFile))}function instantiateArrayBuffer(binaryFile,imports,receiver){return getBinaryPromise(binaryFile).then(binary=>WebAssembly.instantiate(binary,imports)).then(receiver,reason=>{err(`failed to asynchronously prepare wasm: ${reason}`);abort(reason)})}function instantiateAsync(binary,binaryFile,imports,callback){if(!binary&&typeof WebAssembly.instantiateStreaming=="function"&&!isDataURI(binaryFile)&&typeof fetch=="function"){return fetch(binaryFile,{credentials:"same-origin"}).then(response=>{var result=WebAssembly.instantiateStreaming(response,imports);return result.then(callback,function(reason){err(`wasm streaming compile failed: ${reason}`);err("falling back to ArrayBuffer instantiation");return instantiateArrayBuffer(binaryFile,imports,callback)})})}return instantiateArrayBuffer(binaryFile,imports,callback)}function getWasmImports(){return{a:wasmImports}}function createWasm(){var info=getWasmImports();function receiveInstance(instance,module){wasmExports=instance.exports;wasmMemory=wasmExports["e"];updateMemoryViews();wasmTable=wasmExports["O"];addOnInit(wasmExports["f"]);removeRunDependency("wasm-instantiate");return wasmExports}addRunDependency("wasm-instantiate");function receiveInstantiationResult(result){receiveInstance(result["instance"])}if(!wasmBinaryFile)wasmBinaryFile=findWasmBinary();instantiateAsync(wasmBinary,wasmBinaryFile,info,receiveInstantiationResult);return{}}var callRuntimeCallbacks=callbacks=>{while(callbacks.length>0){callbacks.shift()(Module)}};function stackTrace(){abort("missing function: $stackTrace")}stackTrace.stub=true;var __abort_js=()=>{abort("")};var __emscripten_memcpy_js=(dest,src,num)=>HEAPU8.copyWithin(dest,src,src+num);var _emscripten_random=()=>Math.random();var getHeapMax=()=>2147483648;var growMemory=size=>{var b=wasmMemory.buffer;var pages=(size-b.byteLength+65535)/65536;try{wasmMemory.grow(pages);updateMemoryViews();return 1}catch(e){}};var _emscripten_resize_heap=requestedSize=>{var oldSize=HEAPU8.length;requestedSize>>>=0;var maxHeapSize=getHeapMax();if(requestedSize>maxHeapSize){return false}var alignUp=(x,multiple)=>x+(multiple-x%multiple)%multiple;for(var cutDown=1;cutDown<=4;cutDown*=2){var overGrownHeapSize=oldSize*(1+.2/cutDown);overGrownHeapSize=Math.min(overGrownHeapSize,requestedSize+100663296);var newSize=Math.min(maxHeapSize,alignUp(Math.max(requestedSize,overGrownHeapSize),65536));var replacement=growMemory(newSize);if(replacement){return true}}return false};var uleb128Encode=(n,target)=>{if(n<128){target.push(n)}else{target.push(n%128|128,n>>7)}};var sigToWasmTypes=sig=>{var typeNames={i:"i32",j:"i64",f:"f32",d:"f64",e:"externref",p:"i32"};var type={parameters:[],results:sig[0]=="v"?[]:[typeNames[sig[0]]]};for(var i=1;i<sig.length;++i){type.parameters.push(typeNames[sig[i]])}return type};var generateFuncType=(sig,target)=>{var sigRet=sig.slice(0,1);var sigParam=sig.slice(1);var typeCodes={i:127,p:127,j:126,f:125,d:124,e:111};target.push(96);uleb128Encode(sigParam.length,target);for(var i=0;i<sigParam.length;++i){target.push(typeCodes[sigParam[i]])}if(sigRet=="v"){target.push(0)}else{target.push(1,typeCodes[sigRet])}};var convertJsFunctionToWasm=(func,sig)=>{if(typeof WebAssembly.Function=="function"){return new WebAssembly.Function(sigToWasmTypes(sig),func)}var typeSectionBody=[1];generateFuncType(sig,typeSectionBody);var bytes=[0,97,115,109,1,0,0,0,1];uleb128Encode(typeSectionBody.length,bytes);bytes.push(...typeSectionBody);bytes.push(2,7,1,1,101,1,102,0,0,7,5,1,1,102,0,0);var module=new WebAssembly.Module(new Uint8Array(bytes));var instance=new WebAssembly.Instance(module,{e:{f:func}});var wrappedFunc=instance.exports["f"];return wrappedFunc};var wasmTableMirror=[];var wasmTable;var getWasmTableEntry=funcPtr=>{var func=wasmTableMirror[funcPtr];if(!func){if(funcPtr>=wasmTableMirror.length)wasmTableMirror.length=funcPtr+1;wasmTableMirror[funcPtr]=func=wasmTable.get(funcPtr)}return func};var updateTableMap=(offset,count)=>{if(functionsInTableMap){for(var i=offset;i<offset+count;i++){var item=getWasmTableEntry(i);if(item){functionsInTableMap.set(item,i)}}}};var functionsInTableMap;var getFunctionAddress=func=>{if(!functionsInTableMap){functionsInTableMap=new WeakMap;updateTableMap(0,wasmTable.length)}return functionsInTableMap.get(func)||0};var freeTableIndexes=[];var getEmptyTableSlot=()=>{if(freeTableIndexes.length){return freeTableIndexes.pop()}try{wasmTable.grow(1)}catch(err){if(!(err instanceof RangeError)){throw err}throw"Unable to grow wasm table. Set ALLOW_TABLE_GROWTH."}return wasmTable.length-1};var setWasmTableEntry=(idx,func)=>{wasmTable.set(idx,func);wasmTableMirror[idx]=wasmTable.get(idx)};var addFunction=(func,sig)=>{var rtn=getFunctionAddress(func);if(rtn){return rtn}var ret=getEmptyTableSlot();try{setWasmTableEntry(ret,func)}catch(err){if(!(err instanceof TypeError)){throw err}var wrapped=convertJsFunctionToWasm(func,sig);setWasmTableEntry(ret,wrapped)}functionsInTableMap.set(func,ret);return ret};var wasmImports={a:__abort_js,c:__emscripten_memcpy_js,d:_emscripten_random,b:_emscripten_resize_heap};var wasmExports=createWasm();var ___wasm_call_ctors=()=>(___wasm_call_ctors=wasmExports["f"])();var _FFLInitCharModelCPUStepWithCallback=Module["_FFLInitCharModelCPUStepWithCallback"]=(a0,a1,a2,a3)=>(_FFLInitCharModelCPUStepWithCallback=Module["_FFLInitCharModelCPUStepWithCallback"]=wasmExports["g"])(a0,a1,a2,a3);var _FFLInitCharModelCPUStep=Module["_FFLInitCharModelCPUStep"]=(a0,a1,a2)=>(_FFLInitCharModelCPUStep=Module["_FFLInitCharModelCPUStep"]=wasmExports["h"])(a0,a1,a2);var _FFLDeleteCharModel=Module["_FFLDeleteCharModel"]=a0=>(_FFLDeleteCharModel=Module["_FFLDeleteCharModel"]=wasmExports["i"])(a0);var _FFLGetDrawParamOpaFaceline=Module["_FFLGetDrawParamOpaFaceline"]=a0=>(_FFLGetDrawParamOpaFaceline=Module["_FFLGetDrawParamOpaFaceline"]=wasmExports["j"])(a0);var _FFLGetDrawParamOpaBeard=Module["_FFLGetDrawParamOpaBeard"]=a0=>(_FFLGetDrawParamOpaBeard=Module["_FFLGetDrawParamOpaBeard"]=wasmExports["k"])(a0);var _FFLGetDrawParamOpaNose=Module["_FFLGetDrawParamOpaNose"]=a0=>(_FFLGetDrawParamOpaNose=Module["_FFLGetDrawParamOpaNose"]=wasmExports["l"])(a0);var _FFLGetDrawParamOpaForehead=Module["_FFLGetDrawParamOpaForehead"]=a0=>(_FFLGetDrawParamOpaForehead=Module["_FFLGetDrawParamOpaForehead"]=wasmExports["m"])(a0);var _FFLGetDrawParamOpaHair=Module["_FFLGetDrawParamOpaHair"]=a0=>(_FFLGetDrawParamOpaHair=Module["_FFLGetDrawParamOpaHair"]=wasmExports["n"])(a0);var _FFLGetDrawParamOpaCap=Module["_FFLGetDrawParamOpaCap"]=a0=>(_FFLGetDrawParamOpaCap=Module["_FFLGetDrawParamOpaCap"]=wasmExports["o"])(a0);var _FFLGetDrawParamXluMask=Module["_FFLGetDrawParamXluMask"]=a0=>(_FFLGetDrawParamXluMask=Module["_FFLGetDrawParamXluMask"]=wasmExports["p"])(a0);var _FFLGetDrawParamXluNoseLine=Module["_FFLGetDrawParamXluNoseLine"]=a0=>(_FFLGetDrawParamXluNoseLine=Module["_FFLGetDrawParamXluNoseLine"]=wasmExports["q"])(a0);var _FFLGetDrawParamXluGlass=Module["_FFLGetDrawParamXluGlass"]=a0=>(_FFLGetDrawParamXluGlass=Module["_FFLGetDrawParamXluGlass"]=wasmExports["r"])(a0);var _FFLSetExpression=Module["_FFLSetExpression"]=(a0,a1)=>(_FFLSetExpression=Module["_FFLSetExpression"]=wasmExports["s"])(a0,a1);var _FFLGetExpression=Module["_FFLGetExpression"]=a0=>(_FFLGetExpression=Module["_FFLGetExpression"]=wasmExports["t"])(a0);var _FFLSetViewModelType=Module["_FFLSetViewModelType"]=(a0,a1)=>(_FFLSetViewModelType=Module["_FFLSetViewModelType"]=wasmExports["u"])(a0,a1);var _FFLGetBoundingBox=Module["_FFLGetBoundingBox"]=(a0,a1)=>(_FFLGetBoundingBox=Module["_FFLGetBoundingBox"]=wasmExports["v"])(a0,a1);var _FFLIsAvailableExpression=Module["_FFLIsAvailableExpression"]=(a0,a1)=>(_FFLIsAvailableExpression=Module["_FFLIsAvailableExpression"]=wasmExports["w"])(a0,a1);var _FFLSetCoordinate=Module["_FFLSetCoordinate"]=(a0,a1)=>(_FFLSetCoordinate=Module["_FFLSetCoordinate"]=wasmExports["x"])(a0,a1);var _FFLSetScale=Module["_FFLSetScale"]=a0=>(_FFLSetScale=Module["_FFLSetScale"]=wasmExports["y"])(a0);var _FFLiGetRandomCharInfo=Module["_FFLiGetRandomCharInfo"]=(a0,a1,a2,a3)=>(_FFLiGetRandomCharInfo=Module["_FFLiGetRandomCharInfo"]=wasmExports["z"])(a0,a1,a2,a3);var _FFLpGetStoreDataFromCharInfo=Module["_FFLpGetStoreDataFromCharInfo"]=(a0,a1)=>(_FFLpGetStoreDataFromCharInfo=Module["_FFLpGetStoreDataFromCharInfo"]=wasmExports["A"])(a0,a1);var _FFLpGetCharInfoFromStoreData=Module["_FFLpGetCharInfoFromStoreData"]=(a0,a1)=>(_FFLpGetCharInfoFromStoreData=Module["_FFLpGetCharInfoFromStoreData"]=wasmExports["B"])(a0,a1);var _FFLGetAdditionalInfo=Module["_FFLGetAdditionalInfo"]=(a0,a1,a2,a3,a4)=>(_FFLGetAdditionalInfo=Module["_FFLGetAdditionalInfo"]=wasmExports["C"])(a0,a1,a2,a3,a4);var _FFLInitRes=Module["_FFLInitRes"]=(a0,a1)=>(_FFLInitRes=Module["_FFLInitRes"]=wasmExports["D"])(a0,a1);var _FFLInitResGPUStep=Module["_FFLInitResGPUStep"]=()=>(_FFLInitResGPUStep=Module["_FFLInitResGPUStep"]=wasmExports["E"])();var _FFLExit=Module["_FFLExit"]=()=>(_FFLExit=Module["_FFLExit"]=wasmExports["F"])();var _FFLIsAvailable=Module["_FFLIsAvailable"]=()=>(_FFLIsAvailable=Module["_FFLIsAvailable"]=wasmExports["G"])();var _FFLGetFavoriteColor=Module["_FFLGetFavoriteColor"]=(a0,a1)=>(_FFLGetFavoriteColor=Module["_FFLGetFavoriteColor"]=wasmExports["H"])(a0,a1);var _FFLSetLinearGammaMode=Module["_FFLSetLinearGammaMode"]=a0=>(_FFLSetLinearGammaMode=Module["_FFLSetLinearGammaMode"]=wasmExports["I"])(a0);var _FFLGetFacelineColor=Module["_FFLGetFacelineColor"]=(a0,a1)=>(_FFLGetFacelineColor=Module["_FFLGetFacelineColor"]=wasmExports["J"])(a0,a1);var _FFLSetTextureFlipY=Module["_FFLSetTextureFlipY"]=a0=>(_FFLSetTextureFlipY=Module["_FFLSetTextureFlipY"]=wasmExports["K"])(a0);var _FFLSetNormalIsSnorm8_8_8_8=Module["_FFLSetNormalIsSnorm8_8_8_8"]=a0=>(_FFLSetNormalIsSnorm8_8_8_8=Module["_FFLSetNormalIsSnorm8_8_8_8"]=wasmExports["L"])(a0);var _FFLSetFrontCullForFlipX=Module["_FFLSetFrontCullForFlipX"]=a0=>(_FFLSetFrontCullForFlipX=Module["_FFLSetFrontCullForFlipX"]=wasmExports["M"])(a0);var _FFLSetTextureCallback=Module["_FFLSetTextureCallback"]=a0=>(_FFLSetTextureCallback=Module["_FFLSetTextureCallback"]=wasmExports["N"])(a0);var _FFLiDeleteTempObjectMaskTextures=Module["_FFLiDeleteTempObjectMaskTextures"]=(a0,a1,a2)=>(_FFLiDeleteTempObjectMaskTextures=Module["_FFLiDeleteTempObjectMaskTextures"]=wasmExports["P"])(a0,a1,a2);var _FFLiDeleteTempObjectFacelineTexture=Module["_FFLiDeleteTempObjectFacelineTexture"]=(a0,a1,a2)=>(_FFLiDeleteTempObjectFacelineTexture=Module["_FFLiDeleteTempObjectFacelineTexture"]=wasmExports["Q"])(a0,a1,a2);var _FFLiDeleteTextureTempObject=Module["_FFLiDeleteTextureTempObject"]=a0=>(_FFLiDeleteTextureTempObject=Module["_FFLiDeleteTextureTempObject"]=wasmExports["R"])(a0);var _FFLiiGetEyeRotateOffset=Module["_FFLiiGetEyeRotateOffset"]=a0=>(_FFLiiGetEyeRotateOffset=Module["_FFLiiGetEyeRotateOffset"]=wasmExports["S"])(a0);var _FFLiiGetEyebrowRotateOffset=Module["_FFLiiGetEyebrowRotateOffset"]=a0=>(_FFLiiGetEyebrowRotateOffset=Module["_FFLiiGetEyebrowRotateOffset"]=wasmExports["T"])(a0);var _FFLiInvalidateTempObjectFacelineTexture=Module["_FFLiInvalidateTempObjectFacelineTexture"]=a0=>(_FFLiInvalidateTempObjectFacelineTexture=Module["_FFLiInvalidateTempObjectFacelineTexture"]=wasmExports["U"])(a0);var _FFLiInvalidatePartsTextures=Module["_FFLiInvalidatePartsTextures"]=a0=>(_FFLiInvalidatePartsTextures=Module["_FFLiInvalidatePartsTextures"]=wasmExports["V"])(a0);var _FFLiInvalidateRawMask=Module["_FFLiInvalidateRawMask"]=a0=>(_FFLiInvalidateRawMask=Module["_FFLiInvalidateRawMask"]=wasmExports["W"])(a0);var _FFLiVerifyCharInfoWithReason=Module["_FFLiVerifyCharInfoWithReason"]=(a0,a1)=>(_FFLiVerifyCharInfoWithReason=Module["_FFLiVerifyCharInfoWithReason"]=wasmExports["X"])(a0,a1);var _malloc=Module["_malloc"]=a0=>(_malloc=Module["_malloc"]=wasmExports["Y"])(a0);var _free=Module["_free"]=a0=>(_free=Module["_free"]=wasmExports["Z"])(a0);Module["addFunction"]=addFunction;var calledRun;dependenciesFulfilled=function runCaller(){if(!calledRun)run();if(!calledRun)dependenciesFulfilled=runCaller};function run(){if(runDependencies>0){return}preRun();if(runDependencies>0){return}function doRun(){if(calledRun)return;calledRun=true;Module["calledRun"]=true;if(ABORT)return;initRuntime();Module["onRuntimeInitialized"]?.();postRun()}{doRun()}}run();
